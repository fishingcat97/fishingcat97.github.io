---
redirect_from: /_posts/2022-03-20-4-输入输出系统.md
title: 第四章 输入输出系统
tags: 计算机组成原理
---

## 4.1 输入输出概述

### 4.1.1 输入输出系统的发展概况

1.早期阶段  

早期的I/O设备种类较少,I/O设备与主机交换信息都必须通过CPU,CPU 和 I/O设备  串行 工作

2.接口模块和DMA阶段  

这个阶段I/O设备通过接口模块与主机连接,计算机系统采用了总线结构。
通常在接口中都设有数据通路和控制通路。数据经过接口既起到缓冲作用,又可完成串一并变换或并一串变换。控制通路用以传送CPU向I/O设备发出的各种控制命令,或使CPU接受来自I/O设备的反馈信号。许多接口还能满足中断请求处理的要求,使I/O设备与CPU可按并行方式工作,大大地提高了CPU的工作效率。采用接口技术还可以使多台I/O设备分时占用总线使多台I/O设备互相之间也可实现并行工作方式,有利于整机工作效率提高。虽然这个阶段实现了CPU和I/O并行工作,但是在主机与I/O交换信息时,CPU要中断现行程序,也即CPU与I/O还不能做到绝对的并行工作。

DMA(Dmairect Memory Access)技术,其特点是I/O与主存之间有一条直接数据通路,I/O设备可以与主存直接交换信息,使CPU在I/O与主存交换信息时,能继续完成自身的工作,故其资源利用率得到了进一步的提高

3.具有通道结构的阶段

通道是用来负责管理I/O设备以及实现主存与I/O设备之间交换信息的部件,它可视为一种具有特殊功能的处理器。通道有专用的通道指令,它能独立地执行用通道指令所编写的输入输出程序,但它不是一个完全独立的处理器,它受CPU的I/O指令启动、停止或改变其工作状态,是从属于CPU的一个专用处理器。依赖通道管理的I/O设备在与主机交换信息时,CPU不直接参与管理,故CPU的资源利用率更高。

4.具有 I/O 处理机的阶段

输入输出系统发展到第四阶段是具有I/O处理机的阶段。I/O处理机又叫做外围处理机( Peripheral Processor Unit或PPU),它基本独立于主机工作,既可完成I/O通道要完成的I/O控制,还可完成码制变换、格式处理、数据块检错、纠错等操作。具有I/O处理机的输入输出系统与CPU工作的并行性更高,这说明I/O系统对主机来说,具有更大的独立性。

### 4.1.2 输入输出系统的组成

#### **1.I/O软件**

输入输出系统软件的主要任务是:  
- 如何将用户编制的程序(或数据)输入至主机内;
- 如何将运算结果输送给用户;
- 如何实现I/O系统与主机工作的协调等。

(1)I/O指令

I/O指令是机器指令的一类,其指令格式与其他指令既有相似之处,又有不同之点。I/O指令可以和其他机器指令的字长相等,但它还应该能反映CPU与I/O设备交换信息的各种特点,如它必须反映出对多台I/O设备的选择,以及在完成信息交换过程中,对不同设备应作哪些具体操作等。

![I/O指令格式](/assets/image/计算机组成原理/输入输出系统/IO指令格式.jpg)

- 操作码可作为I/O指令与其他类指令(如访存指令、算逻指令、控制指令等)的判别代码
- 命令码用来体现I/O的具体操作
- 设备码是作为对多台LO设备的选择码

(2)通道指令

通道指令是对具有通道的I/O系统专门设置的指令,这类指令一般用以指明参与传送(写入或读出)的数据组在主存中的首地址;指明需要传送的字数或所传送数据组的末地址;指明所选设备的设备码及完成某种操作的命令码。这类指令的位数一般较长,如IBM/370机的通道指令为64位。

#### **2.I/O硬件**

输入输出系统的硬件组成是多种多样的,在带有接口的O系统中,一般包括接口模块及O设备两大部分。

(1)设备-I/O 接口

(2)设备-设备控制器-通道

### 4.1.3 I/O 设备与主机的联系方式

#### **1. I/O 设备编址方式 **

- **统一编址**

统一编址就是将I/O地址看作是存储器地址的一部分。如在64K地址的存储空间中,划出8K地址作为I/O的地址,凡是在这8K地址范围内的访问,就是对I/O的访问,所用的指令与访存指令相似。

- **不统一编址**

不统一编址就是指I/O地址和存储器地址是分开的,所有对I/O的访问必须有专用的I/O指令。

- 显然统一编址占用了存储空间,减少了主存容量,但无需专用的I/O指令。不统一编址由于不占用主存空间,故不影响主存容量,但需设I/O专用指令。

#### **2.设备选址**

用设备选择电路识别是否被选中。将CPU给出的地址和设备中保存的自己的地址进行比较，如果两者相同，则选中设备。

#### **3.传送方式**

- 串行传输：在同一瞬间只传送一位信息,在不同时刻连续还位传送一串信息

- 并行传输：在同一瞬间,n位信息同时从CPU输送至I/O设备,或由I/O设备输入到CPU

#### **4.联络方式**

**(1)立即响应**

对于一些工作速度十分缓慢的I/O设备,如指示灯的亮与灭;开关的通与断;A/D转换器缓变信号的输入等等。当它们与CPU发生联系时,通常都已使其处于某种等待状态,因此,只要CPU的I/O指令一到,它们便立即响应故这种设备无需特殊联络信号,称作立即响应方式。

**(2)异步工作采用应答信号**

当I/O设备与主机工作速度不匹配时,通常采用异步工作方式。这种方式在交换信息前,I/O与CPU各自完成自身的任务,一旦出现联络信号时,彼此才准备交换信息。

- 串行

![串行联络](/assets/image/计算机组成原理/输入输出系统/串行联络.jpg)

I/O设备与CPU双方设定一组特殊标记,用“起始”和“终了”来建立联系。图中9.09ms的低电平表示“起始”,又用2×9.09ms的高电平表示“终了”。

- 并行

![并行联络](/assets/image/计算机组成原理/输入输出系统/并行联络.jpg)

图中示意当CPU将数据输出到I/O接口后,接口立即向I/O设备发出一个“ Ready”(准备就绪)信号,告诉I/O设备可以从接口内取数据。I/O设备收到“ Ready”后,通常便立即从接口中取出数据,接着便向接口回发一个“ Strobe'信号,并让接口转告CPU,接口中的数据已被取走,CPU还可继续向此接口送数。

同理,倘若I/O设备需向CPU传送数据,则先由I/O向接口送数据,并向接口发“ Strobe"”信号,表明数据已送出。接口接到联络信号后便通知CPU可以来取数据,一旦CPU取走时,接凵便向O设备发“ Ready”信号,告诉I/O设备,数据已被取走,尚可继续送数。这种一应一答的联络方式,称作异步联络。

**(3)同步工作采用同步时标**
 
同步工作要求I/O设备与CPU的工作速度完全同步,例如在数据采集过程中,若外部数据以2400位/秒速率传送至接口,则CPU也必须以1/2400秒的速率接收每一位数。这种联络互相之间还得配有专用电路,用以产生同步时标来控制同步工作。

#### **5.I/O 设备与主机的连接方式**

**1.辐射式连接**

![辐射式连接](/assets/image/计算机组成原理/输入输出系统/辐射式连接.jpg)

**2.总线连接**

### 4.1.4 I/O设备与主机信息传送的控制方式

#### **1.程序查询方式**



#### **2.程序中断方式**
#### **3.DMA 方式**